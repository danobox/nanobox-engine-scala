#!/bin/bash
# -*- mode: bash; tab-width: 2; -*-
# vim: ts=2 sw=2 ft=bash noet

# source the Nos framework
. /opt/nanobox/nos/common.sh

# initialize Nos with the original arguments
nos_init "$@"

# source common lib
. ${engine_lib_dir}/scala.sh

# install sun*_java or openjdk*
install_runtime

# setup cache dirs for sbt
sbt_cache_dir

# set up auto link creation for console'd containers
create_profile_links

# if nodejs is required, we have a bit more setup to do
if [[ "$(is_nodejs_required)" = "true" ]]; then

  # add node_modules/.bin to the PATH
  persist_npm_bin_to_path

  # set the node.js runtime in cache
  nodejs_persist_runtime
fi

exit 0